# 선택된 오브젝트 편집 기능 명세서

## 개요
캔버스에 배치된 가구/문을 선택했을 때 표시되는 정보 팝업에서 직접 속성을 수정할 수 있는 기능

## 현재 상태
- 가구 선택 시 정보 팝업 표시 (이름, 크기, 단축키 안내)
- 읽기 전용, 수정 불가

## 목표
- 선택된 오브젝트의 속성을 실시간으로 편집
- 변경 사항 즉시 캔버스에 반영

---

## 기능 상세

### 1. 가구 편집

#### 편집 가능 속성
| 속성 | 타입 | 비고 |
|------|------|------|
| 이름 | text | 캔버스 내 표시 이름 |
| 너비 | number (cm) | 양수만 허용 |
| 높이 | number (cm) | 양수만 허용 |
| 색상 | color | HEX, 컬러 피커 제공 |
| 회전 | select | 0/90/180/270° |

#### UI 디자인
```
┌─────────────────────────────┐
│ 📝 가구 편집                 │
├─────────────────────────────┤
│ 이름: [테스트 소파      ]   │
│                             │
│ 크기:                       │
│ 너비 [180] × 높이 [90] cm   │
│                             │
│ 색상: [■] [#6366f1    ]     │
│                             │
│ 회전: [0°▼] 또는 [↻] 버튼   │
├─────────────────────────────┤
│ [적용]  [삭제]  [닫기]      │
└─────────────────────────────┘
```

#### 동작
1. 가구 클릭 → 편집 팝업 표시
2. 속성 수정 → 실시간 미리보기 (선택)
3. [적용] 클릭 → 변경 사항 확정
4. [삭제] 클릭 → 가구 제거
5. [닫기] 또는 외부 클릭 → 팝업 닫기

---

### 2. 문 편집

#### 편집 가능 속성
| 속성 | 타입 | 비고 |
|------|------|------|
| 너비 | number (cm) | 양수만 허용 |
| 열림 방향 | select | inside(안쪽) / outside(바깥쪽) |
| 경첩 위치 | select | left(왼쪽) / right(오른쪽) |

#### UI 디자인
```
┌─────────────────────────────┐
│ 🚪 문 편집                   │
├─────────────────────────────┤
│ 너비: [90] cm               │
│                             │
│ 열림 방향:                  │
│ ○ 안쪽  ● 바깥쪽            │
│                             │
│ 경첩 위치:                  │
│ ● 왼쪽  ○ 오른쪽            │
├─────────────────────────────┤
│ [적용]  [삭제]  [닫기]      │
└─────────────────────────────┘
```

---

### 3. 공통 기능

#### 키보드 단축키
| 키 | 동작 |
|----|------|
| Enter | 변경 사항 적용 |
| Escape | 편집 취소, 팝업 닫기 |
| Delete | 오브젝트 삭제 |
| R | 90° 회전 (가구만) |

#### 유효성 검사
- 크기: 양수만 허용 (0 이하 불가)
- 이름: 빈 문자열 불가

#### 실시간 미리보기 (선택사항)
- 크기/색상 변경 시 캔버스에 즉시 반영
- [취소] 시 원래 값으로 복구
- 성능 고려하여 debounce 적용 (300ms)

---

## 기술 구현

### 컴포넌트 구조
```
components/
  editor/
    ObjectEditPopup.vue       # 편집 팝업 컨테이너
    FurnitureEditForm.vue     # 가구 편집 폼
    DoorEditForm.vue          # 문 편집 폼
```

### 상태 관리
```typescript
interface EditingState {
  isEditing: boolean
  objectType: 'furniture' | 'door' | null
  originalData: Furniture | Door | null  // 취소 시 복구용
  editData: Furniture | Door | null      // 수정 중인 데이터
}
```

### 이벤트 흐름
```
1. 오브젝트 클릭
   ↓
2. selectedFurniture/selectedDoor 설정
   ↓
3. ObjectEditPopup 표시
   ↓
4. 사용자 입력
   ↓
5. 유효성 검사
   ↓
6. [적용] → 데이터 업데이트, 팝업 닫기
   [취소] → 원래 값 복구, 팝업 닫기
```

---

## 테스트 케이스

### 단위 테스트
- [ ] 가구 이름 변경 후 적용
- [ ] 가구 크기 변경 후 적용
- [ ] 가구 색상 변경 후 적용
- [ ] 가구 회전 변경 후 적용
- [ ] 문 너비 변경 후 적용
- [ ] 문 열림 방향 변경 후 적용
- [ ] 문 경첩 위치 변경 후 적용
- [ ] 잘못된 크기 입력 시 에러 표시
- [ ] 취소 시 원래 값 복구
- [ ] 삭제 버튼 동작

### E2E 테스트
- [ ] 가구 클릭 → 편집 팝업 표시
- [ ] 속성 수정 → 캔버스 반영 확인
- [ ] Enter 키로 적용
- [ ] Escape 키로 취소
- [ ] 외부 클릭으로 닫기

---

## 우선순위

### P0 (필수)
- 가구 크기 편집
- 가구 색상 편집
- 적용/취소 버튼

### P1 (중요)
- 가구 이름 편집
- 문 속성 편집
- 키보드 단축키

### P2 (개선)
- 실시간 미리보기
- 회전 버튼 UI
- 애니메이션
